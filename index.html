<!DOCTYPE html>
<!--[if IE 8]> 				 <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	<title>Metrobus</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/foundation.css">
	<script src="js/vendor/custom.modernizr.js"></script>

	<style>

	html,body{
		height: 100%;
	}

	body {margin: 0; padding: 0 }

	#pony{
		width: 100%;
		height: 100%;
	}
	
	#position-button{
		position: absolute;
		bottom: 20px;
		left: calc(50% - 25px);
		z-index: 100;
	}

	</style>
</head >

<body>
	
	<a id="position-button"><img src="img/ps.png" alt=""></a>
	<div id="pony"></div>
	

	<script src="js/vendor/jquery.js"></script>
	<script src="js/foundation.min.js"></script>
	<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<script src="js/gmaps.js"></script>

	<script>

	$(document).ready(function(){
		map = new GMaps({
			div: '#pony',
			lat: 19.064795,
			lng: -98.213911
		});

		$("#position-button").click(geoFindMe)
	})

	function geoFindMe() {
		var output = document.getElementById("out");

		if (!navigator.geolocation){
			alert("Tu dispositivo no soporta geolocalizacion o esta desactiva. Revisa tu configuración", "Aviso")
			return;
		}

		function success(position) {
			var latitude  = position.coords.latitude;
			var longitude = position.coords.longitude;

			map.setCenter(latitude,longitude);

			map.addMarker({
				lat: latitude,
				lng: longitude,
				title: 'Estas aqui',
				click: function(e) {
					alert('You clicked in this marker');
				}
			});
		};

		function error() {
			alert ("No podemos determinar tu posición, intentalo mas tarde ");
		};

		//output.innerHTML = "<p>Locating…</p>";


		navigator.geolocation.getCurrentPosition(success, error);
	}

	</script>

</body>
</html>
